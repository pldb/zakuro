# frozen_string_literal: true

require File.expand_path('../../../../../' \
                         'lib/zakuro/version/context',
                         __dir__)

require File.expand_path('../../../../../' \
                         'lib/zakuro/version/daien/monthly/lunar_phase',
                         __dir__)

DAIEN_NOVEMBER_1ST = {
  766 => '54-1622',
  767 => '49-431',
  768 => '43-1613',
  769 => '7-1272',
  770 => '1-1332',
  771 => '55-1422',
  772 => '19-1068',
  773 => '13-2237',
  774 => '8-1088',
  775 => '32-1494',
  776 => '27-155',
  777 => '51-157',
  778 => '45-635',
  779 => '39-606',
  780 => '3-54',
  781 => '57-569',
  782 => '51-2024',
  783 => '15-2336',
  784 => '10-1339',
  785 => '34-1579',
  786 => '28-2684',
  787 => '22-3007',
  788 => '46-2372',
  789 => '40-2471',
  790 => '35-227',
  791 => '59-337',
  792 => '53-2234',
  793 => '48-1153',
  794 => '12-1274',
  795 => '6-2136',
  796 => '30-1697',
  797 => '24-1632',
  798 => '18-1915',
  799 => '42-1678',
  800 => '37-115',
  801 => '31-2152',
  802 => '55-2489',
  803 => '50-937',
  804 => '14-736',
  805 => '8-1001',
  806 => '2-951',
  807 => '26-503',
  808 => '20-1332',
  809 => '14-2998',
  810 => '39-364',
  811 => '33-2271',
  812 => '28-501',
  813 => '52-159',
  814 => '46-273',
  815 => '9-2682',
  816 => '3-2977',
  817 => '58-1048',
  818 => '22-1268',
  819 => '17-255',
  820 => '11-2019',
  821 => '35-2050',
  822 => '29-2590',
  823 => '53-2056',
  824 => '47-1994',
  825 => '41-2477',
  826 => '5-2460',
  827 => '0-1101',
  828 => '55-124',
  829 => '19-366',
  830 => '13-1560',
  831 => '7-1945',
  832 => '31-1300',
  833 => '25-1370',
  834 => '49-1026',
  835 => '43-2167',
  836 => '38-997',
  837 => '2-1421',
  838 => '57-86',
  839 => '51-1035',
  840 => '15-600',
  841 => '9-567',
  842 => '33-23',
  843 => '27-518',
  844 => '21-1941',
  845 => '45-2267',
  846 => '40-1261',
  847 => '34-2812',
  848 => '58-2640',
  849 => '52-2966',
  850 => '46-2922',
  851 => '10-2429',
  852 => '5-155',
  853 => '29-276',
  854 => '23-2152',
  855 => '18-1071',
  856 => '42-1215',
  857 => '36-2086',
  858 => '30-2262',
  859 => '54-1603',
  860 => '48-1861'
}.freeze

describe 'Zakuro' do
  describe 'Daien' do
    describe 'Monthly' do
      describe 'LunarPhase' do
        describe '.next_phase' do
          context 'november 1st every year' do
            it 'should be expected values' do
              DAIEN_NOVEMBER_1ST.each do |year, value|
                # 11月定朔
                lunar_phase = Zakuro::Daien::Monthly::LunarPhase.new(
                  western_year: year
                )
                actual = lunar_phase.next_phase

                expect(actual.format).to eq value
              end
            end
          end
        end
      end
    end
  end
end
