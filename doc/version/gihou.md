# 儀鳳暦

文武天皇2年1月1日（698/02/16）-天平宝字7年12月30日（764/02/06）

# 著者

[pldb](https://github.com/pldb)

# 前提

儀鳳暦は太陰太陽暦である

詳細は [太陰太陽暦](./section/lunisolar_calendar.md) に記載してある

# 計算

計算にあたって、暦共通の計算と、儀鳳暦固有の計算がある

暦共通の計算は前処理/後処理として説明する

その間に儀鳳暦固有の計算を説明することとする

## 共通前処理

詳細は [共通前処理](./section/common_pre_process.md) に記載してある

## 儀鳳暦固有の計算

計算手順を以下に示す

1. 11月定朔（補正後の月初日）を求める
    1. 対象の西暦年から前年冬至を求める
    2. 対象の西暦年から冬至の月齢を求める
    3. 前年冬至から11月経朔（補正前の月初日）を求める
    4. 二十四節気から太陽の運動の補正値を求める
    5. 月の進退から月の運動の補正値を求める
    6. 太陽・月の運動の補正値から11月定朔（補正後の月初日）を求める
2. 12月定朔（補正後の月初日）を求める
    1. 11月経朔を進めて12月経朔を求める
    2. 11月の二十四節気を進めて12月の二十四節気を求める
    3. 12月の二十四節気から太陽の運動の補正値を求める
    4. 11月の月の進退を進めて12月の月の進退を求める
    5. 12月の月の進退から月の運動の補正値を求める
    6. 太陽・月の運動の補正値から12月定朔（補正後の月初日）を求める

1の計算方法は『日本暦日原典』p.516-520に依拠する

基本的に [宣明暦](./senmyou.md) と手順は変わらない

使用する定数の差分は [定数](./section/const.md) に記載してある

上記のうち、宣明暦との差分のみ記載する

### 二十四節気から太陽の運動の補正値を求める

「24気損益眺朒数」は次の通りである

|-|a（眺朒数の初日の値）|b（損益率初日の値）|c（一日ごとの差）|
|:----|:----|:----|:----|
|冬至（とうじ）|0.0|+3.9546|-0.0372|
|小寒（しょうかん）|+54.0|+3.4091|-0.0372|
|大寒（だいかん）|+100.0|+2.8636|-0.0372|
|立春（りっしゅん）|+138.0|+2.3181|+0.0372|
|雨水（うすい）|+176.0|+2.8636|+0.0372|
|啓蟄（けいちつ）|+222.0|+3.4091|+0.0372|
|春分（しゅんぶん）|+276.0|-3.7220|+0.0329|
|清明（せいめい）|+222.0|-3.2086|+0.0329|
|穀雨（こくう）|+176.0|-2.6952|+0.0329|
|立夏（りっか）|+138.0|-2.1818|-0.0329|
|小満（しょうまん）|+100.0|-2.6952|-0.0329|
|芒種（ぼうしゅ）|+54.0|-3.2086|-0.0329|
|夏至（げし）|0.0|-3.7220|+0.0329|
|小暑（しょうしょ）|-54.0|-3.2086|+0.0329|
|大暑（たいしょ）|-100.0|-2.6952|+0.0329|
|立秋（りっしゅう）|-138.0|-2.1818|-0.0329|
|処暑（しょしょ）|-176.0|-2.6952|-0.0329|
|白露（はくろ）|-222.0|-3.2086|-0.0329|
|秋分（しゅうぶん）|-276.0|+3.9546|-0.0372|
|寒露（かんろ）|-222.0|+3.4091|-0.0372|
|霜降（そうこう）|-176.0|+2.8636|-0.0372|
|立冬（りっとう）|-138.0|+2.3181|+0.0372|
|小雪（しょうせつ）|-100.0|+2.8636|+0.0372|
|大雪（たいせつ）|-54.0|+3.4091|+0.0372|

#### 月の進退から月の運動の補正値を求める

宣明暦とは異なり、次の表を用いる

|入暦|小余（下限）|小余（上限）|増減率|遅速積|備考|
|:----|:----|:----|:----|:----|:----|
|01日|0|1340|-134|0|-|
|02日|0|1340|-117|-134|-|
|03日|0|1340|-99|-251|-|
|04日|0|1340|-78|-350|-|
|05日|0|1340|-56|-428|-|
|06日|0|1340|-33|-484|-|
|07日|0|1191|-9|-517|-|
|07日|1191|1340|0|-526|-|
|08日|0|1340|+14|-526|-|
|09日|0|1340|+38|-512|-|
|10日|0|1340|+62|-474|-|
|11日|0|1340|+85|-412|-|
|12日|0|1340|+104|-327|-|
|13日|0|1340|+121|-223|-|
|14日|0|1042|+102|-102|-|
|14日|1042|1340|+29|0|-|
|15日|0|1340|+128|+29|-|
|16日|0|1340|+115|+157|-|
|17日|0|1340|+95|+272|-|
|18日|0|1340|+74|+367|-|
|19日|0|1340|+52|+441|-|
|20日|0|1340|+28|+493|-|
|21日|0|892|+4|+521|-|
|21日|892|1340|0|+525|-|
|22日|0|1340|-20|+525|-|
|23日|0|1340|-44|+505|-|
|24日|0|1340|-68|+461|-|
|25日|0|1340|-89|+393|-|
|26日|0|1340|-108|+304|-|
|27日|0|1340|-125|+196|-|
|28日|0|743.06|-71|+71|-|

『歴代天文律暦等志彙編　七』中華書房 p.2010-2013 により作成した

ただし、引用元を次のように訂正する

* 14日の小余上限が 1402 となっているが、これは 1042 の誤り
  * 宣明暦の定数と比較するとこの誤りが分かる
    * 宣明暦の7日の小余は7465（初益）である。入暦は1始まりなので、0始まりで表現すると 6-7465 となる
    * 6 * 8400（統法） + 7465（初益） = 57865
    * 57865 * 2 = 115730
    * 115730 / 1340（総法） = 13 余り 1041.690476
    * 0始まりを1始まりにして少数部を丸めると 14-1042
* 28日の小余上限が 743 となっているが、これを 743.06 とする
  * 天平13年（741年） 2月 の計算により 743.06 とした

宣明暦とは異なり進退の列がないが、それは無視して入暦だけを求めればよい

これは『日本暦日原典』の中で計算方法Aとされている

他の計算方法B,Cも掲載されているが、ここでは一旦割愛する

#### 11月の二十四節気を進めて12月の二十四節気を求める

「入気定日加減数」は次の通りである

|二十四節気|経過|
|:----|:----|
| 冬至（とうじ）・大雪（たいせつ） | 14 日 910 分 5 秒 |
| 小寒（しょうかん）・小雪（しょうせつ） | 14 日 1014 分 5 秒 |
| 大寒（だいかん）・立冬（りっとう） | 14 日 1118 分 5 秒 |
| 立春（りっしゅん）・霜降（そうこう） | 14 日 1118 分 5 秒 |
| 雨水（うすい）・寒露（かんろ） | 14 日 1014 分 5 秒 |
| 啓蟄（けいちつ）・秋分（しゅうぶん） | 14 日 910 分 5 秒 |
| 春分（しゅんぶん）・白露（はくろ） | 15 日 1014 分 5 秒 |
| 清明（せいめい）・処暑（しょしょ） | 15 日 910 分 5 秒 |
| 穀雨（こくう）・立秋（りっしゅう） | 15 日 806 分 5 秒 |
| 立夏（りっか）・大暑（たいしょ） | 15 日 806 分 5 秒 |
| 小満（しょうまん）・小暑（しょうしょ） | 15 日 910 分 5 秒 |
| 芒種（ぼうしゅ）・夏至（げし） | 15 日 1014 分 5 秒 |

## 共通後処理

詳細は [共通後処理](./section/common_post_process.md) に記載してある

# 結語

暦共通・儀鳳暦の暦算は以上である

# 参考文献

* 内田　正男『日本暦日原典』雄山閣出版 1975(1975)
